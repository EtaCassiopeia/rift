{
  "imposters": [
    {
      "port": 4545,
      "protocol": "http",
      "name": "Basic HTTP Mock",
      "recordRequests": true,
      "stubs": [
        {
          "predicates": [
            { "equals": { "method": "GET", "path": "/hello" } }
          ],
          "responses": [
            {
              "is": {
                "statusCode": 200,
                "headers": { "Content-Type": "application/json" },
                "body": { "message": "Hello, World!" }
              }
            }
          ]
        },
        {
          "predicates": [
            { "equals": { "method": "POST", "path": "/echo" } }
          ],
          "responses": [
            {
              "is": {
                "statusCode": 201,
                "headers": { "Content-Type": "application/json" },
                "body": { "received": true }
              }
            }
          ]
        },
        {
          "predicates": [
            { "startsWith": { "path": "/api/" } }
          ],
          "responses": [
            {
              "is": {
                "statusCode": 200,
                "body": "API response"
              }
            }
          ]
        },
        {
          "predicates": [
            { "contains": { "path": "search" } }
          ],
          "responses": [
            {
              "is": {
                "statusCode": 200,
                "body": { "results": [] }
              }
            }
          ]
        },
        {
          "predicates": [
            { "matches": { "path": "^/users/[0-9]+$" } }
          ],
          "responses": [
            {
              "is": {
                "statusCode": 200,
                "body": { "id": 123, "name": "Test User" }
              }
            }
          ]
        }
      ],
      "defaultResponse": {
        "statusCode": 404,
        "body": "Not Found"
      }
    },
    {
      "port": 4546,
      "protocol": "http",
      "name": "Headers and Query Mock",
      "stubs": [
        {
          "predicates": [
            { "equals": { "headers": { "X-Custom-Header": "test-value" } } }
          ],
          "responses": [
            {
              "is": {
                "statusCode": 200,
                "body": "Custom header matched"
              }
            }
          ]
        },
        {
          "predicates": [
            { "equals": { "query": { "format": "json" } } }
          ],
          "responses": [
            {
              "is": {
                "statusCode": 200,
                "headers": { "Content-Type": "application/json" },
                "body": { "format": "json" }
              }
            }
          ]
        },
        {
          "predicates": [
            {
              "and": [
                { "equals": { "method": "GET" } },
                { "equals": { "query": { "page": "1" } } }
              ]
            }
          ],
          "responses": [
            {
              "is": {
                "statusCode": 200,
                "body": { "page": 1, "items": [] }
              }
            }
          ]
        }
      ]
    },
    {
      "port": 4547,
      "protocol": "http",
      "name": "Response Behaviors Mock",
      "stubs": [
        {
          "predicates": [
            { "equals": { "path": "/wait" } }
          ],
          "responses": [
            {
              "is": {
                "statusCode": 200,
                "body": "Delayed response"
              },
              "_behaviors": {
                "wait": 100
              }
            }
          ]
        },
        {
          "predicates": [
            { "equals": { "path": "/cycle" } }
          ],
          "responses": [
            { "is": { "statusCode": 200, "body": "Response 1" } },
            { "is": { "statusCode": 200, "body": "Response 2" } },
            { "is": { "statusCode": 200, "body": "Response 3" } }
          ]
        },
        {
          "predicates": [
            { "equals": { "path": "/repeat" } }
          ],
          "responses": [
            {
              "is": { "statusCode": 200, "body": "Repeated" },
              "_behaviors": { "repeat": 3 }
            },
            { "is": { "statusCode": 200, "body": "After repeat" } }
          ]
        }
      ]
    }
  ]
}
